**************************************************************
*                  Commander parameter file                  *
**************************************************************
BASE_SEED                     = 163425  # Seed for random number generator
NUM_GIBBS_STEPS_PER_TOD_SAMPLE = 1
SAMPLE_ONLY_POLARIZATION      = .false.
SAMPLE_SIGNAL_AMPLITUDES      = .true.
SAMPLE_SPECTRAL_INDICES       = .true.
SAMPLE_POWSPEC                = .false.
ENABLE_TOD_ANALYSIS           = .true.
TOD_OUTPUT_4D_MAP_EVERY_NTH_ITER = 10
TOD_OUTPUT_AUXILIARY_MAPS_EVERY_NTH_ITER = 10
TOD_INCLUDE_ZODI              = .false.
FFTW3_MAGIC_NUMBERS           = fft3_magic_numbers_230810.txt
ENABLE_TOD_SIMULATIONS        = .false.
SIMS_OUTPUT_DIRECTORY         = none
RESAMPLE_CMB                  = .false.
FIRST_SAMPLE_FOR_CMB_RESAMP   = 1
LAST_SAMPLE_FOR_CMB_RESAMP    = 15
NUM_SUBSAMP_PER_MAIN_SAMPLE   = 10
CG_CONVERGENCE_CRITERION       = fixed_iter chisq   # {residual, chisquare}
CG_LMAX_PRECOND                =    -1   # lmax for low-l preconditioner
CG_MAXITER                     =   300   # Conjugate gradients time out limit
CG_MINITER                     =     5
CG_TOLERANCE                   = 1.d-8   # Fractional CG convergence criterion
CG_CONV_CHECK_FREQUENCY        =     1   # Check convergence every n'th iteration
CG_PRECOND_TYPE                = diagonal pseudoinv
CG_INIT_AMPS_ON_ZERO           = .false.
SET_ALL_NOISE_MAPS_TO_MEAN     = .false.
NUM_INDEX_CYCLES_PER_ITERATION =     1
IGNORE_GAIN_AND_BANDPASS_CORR = .false.
THINNING_FACTOR               = 1
NSIDE_CHISQ                   = 16
POLARIZATION_CHISQ            = .true.
OUTPUT_MIXING_MATRIX          = .false.
OUTPUT_RESIDUAL_MAPS          = .true.
OUTPUT_CHISQ_MAP              = .true.
OUTPUT_EVERY_NTH_CG_ITERATION = 0
OUTPUT_CG_PRECOND_EIGENVALS   = .false.
OUTPUT_INPUT_MODEL            = .false.
OUTPUT_DEBUG_SEDS             = .false.
OUTPUT_SIGNALS_PER_BAND       = .false.
SOURCE_MASKFILE                = none   #bright_sources.txt
PROCESSING_MASKFILE            = none   #mask_cmb_v1_n0256_apod_v2_clean.fits
PROCESSING_MASKFILE2           = none   #mask_cmb_v1_n0256_apod_v2_clean.fits
PROC_SMOOTH_SCALE              = 30.    #arcmin; smoothing inside processing mask
 NUM_SMOOTHING_SCALES           = 3
 SMOOTHING_SCALE_FWHM01          = 300.      # Arcmin; 0 = native resolution
 SMOOTHING_SCALE_LMAX01          = 96
 SMOOTHING_SCALE_NSIDE01         = 32  # Must match NSIDE of component it is used for
 SMOOTHING_SCALE_PIXWIN01        = pixel_window_n0032.fits
 SMOOTHING_SCALE_FWHM_POSTPROC01 = 600.    # Smoothing FWHM after pixel-by-pixel fit
 SMOOTHING_SCALE_FWHM02          = 600.      # Arcmin; 0 = native resolution
 SMOOTHING_SCALE_LMAX02          = 64
 SMOOTHING_SCALE_NSIDE02         = 16  # Must match NSIDE of component it is used for
 SMOOTHING_SCALE_PIXWIN02        = pixel_window_n0016.fits
 SMOOTHING_SCALE_FWHM_POSTPROC02 = 600.    # Smoothing FWHM after pixel-by-pixel fit
 SMOOTHING_SCALE_FWHM03          = 60.      # Arcmin; 0 = native resolution
 SMOOTHING_SCALE_LMAX03          = 64
 SMOOTHING_SCALE_NSIDE03         = 16  # Must match NSIDE of component it is used for
 SMOOTHING_SCALE_PIXWIN03        = pixel_window_n0016.fits
 SMOOTHING_SCALE_FWHM_POSTPROC03 = 600.    # Smoothing FWHM after pixel-by-pixel fit
 TOD_NUM_BP_PROPOSALS_PER_ITER  = 1    # 1 for sampling; >= 1 for optimize
 NUMITER_RESAMPLE_HARD_GAIN_PRIORS = 3
CMB_DIPOLE_PRIOR                = none
OUTPUT_COMPS_TO_CHAINDIR        = all
ALMSAMP_NSAMP_ALM                      = 100  # of mcmc samples per gibbs
ALMSAMP_BURN_IN                        = 2     # of gibbs iterations with steplength adjustment
ALMSAMP_NSIDE_CHISQ_LOWRES             = 16
ALMSAMP_PRIOR_FWHM                     = 0
ALMSAMP_OPTIMIZE_ALM                   = .false. # save chisq from prev gibbs iter
ALMSAMP_APPLY_PRIOR                    = .true. # apply prior to alms
ALMSAMP_PIXREG                         = .true.
ALMSAMP_PRIORSAMP_FROZEN_REGIONS       = .true.
LOCALSAMP_BURN_IN                      = 2    # of gibbs iterations with steplength adjustment
LOCALSAMP_OUTPUT_MAPS                  = .false. # {.true., .false.} output extra maps from local sampler
MJYSR_CONVENTION              = IRAS
T_CMB                         = 2.7255d0
OPERATION                     = sample  # {sample,optimize}
VERBOSITY                     = 3       # [0,...,3]
NUMCHAIN         = 1       # Number of independent chains
NUM_GIBBS_ITER   = 2000       # Length of each Markov chain
CHAIN_STATUS     = append
NUM_INIT_CHAINS  = 1
INIT_CHAIN01     = /mn/stornext/d22/cmbco/comap/nils/Commander/my_workspace/AST9240/data/chain_init_BP10.5.h5:3
SAMPLE_SIGNAL_AMPLITUDES      = .true.
SAMPLE_SPECTRAL_INDICES       = .false.
TOD_NUM_BP_PROPOSALS_PER_ITER  = 1    # 1 for sampling; >= 1 for optimize
ENABLE_TOD_SIMULATIONS        = .false.
SIMS_OUTPUT_DIRECTORY         = /mn/stornext/d22/cmbco/comap/nils/Commander/my_workspace/AST9240/data/LFI_030_sim
OUTPUT_DIRECTORY              = chains_sim
DATA_DIRECTORY                 = /mn/stornext/d22/cmbco/comap/nils/Commander/my_workspace/AST9240/data
NUMBAND                        = 1
INCLUDE_BAND001                = .true.   # 30 GHz
BAND_LABEL001                  = 030
BAND_OBS_PERIOD001             = 1
BAND_POLARIZATION001           = .true.
BAND_NSIDE001                  = 512
BAND_LMAX001                   = 1500
BAND_UNIT001                   = uK_cmb
BAND_NOISE_FORMAT001           = rms
BAND_NOISE_UNIFORMIZE_FSKY001  = 0.0 1
BAND_MASKFILE001               = fullsky
BAND_MASKFILE_CALIB001         = mask_common_dx12_n0512_TQU.fits  fullsky
BAND_BEAMTYPE001               = b_l         # {b_l, febecop}
BAND_BEAM_B_L_FILE001          = Bl_TEB_npipe6v19_30GHzx30GHz.fits
BAND_BEAM_B_PTSRC_FILE001      = febecop_AT20G_GB6_NVSS_PCCS2_v6_030.h5
BAND_PIXEL_WINDOW001           = pixel_window_n0512.fits
BAND_SAMP_NOISE_AMP001         = .false.
BAND_BANDPASS_TYPE001          = LFI
BAND_BANDPASS_MODEL001         = additive_shift   # {powlaw_tilt, additive_shift}
BAND_NOMINAL_FREQ001           = 28.4
BAND_SAMP_BANDPASS001          = .false.
BAND_BANDPASSFILE001           = LFI_instrument_v4.h5
BAND_SAMP_GAIN001              = .false.
BAND_GAIN_PRIOR_MEAN001         = 1.
BAND_GAIN_PRIOR_RMS001          = 0.1
BAND_GAIN_CALIB_COMP001        = all cmb
BAND_GAIN_LMIN001              = -1
BAND_GAIN_LMAX001              = -1
BAND_GAIN_APOD_MASK001         = fullsky
BAND_GAIN_APOD_FWHM001         = 120.
BAND_DEFAULT_GAIN001           =   1.
BAND_DEFAULT_BP_DELTA001       =   0.
BAND_DEFAULT_NOISEAMP001       =   1.
BAND_COMPONENT_SENSITIVITY001  = broadband
BAND_TOD_TYPE001               = LFI
BAND_TOD_BP_INIT_PROP001       = bp_init_030_v1.dat
BAND_TOD_HALFRING001           = 0
BAND_TOD_START_SCANID001       = 3
BAND_TOD_END_SCANID001         = 44072
BAND_TOD_TOT_NUMSCAN001        = 45860
BAND_TOD_FLAG001               = 6111232
BAND_TOD_ORBITAL_ONLY_ABSCAL001 =.false.
BAND_TOD_DETECTOR_LIST001      = 27M,27S,28M,28S
BAND_TOD_INIT_FROM_HDF001      = default
BAND_MAPFILE001                = init_tod_map_030_n512_BP8.1_v1.fits
BAND_NOISEFILE001              = init_tod_rms_030_n512_BP8.1_v1.fits
BAND_REG_NOISEFILE001          = none   BP_030_rms_v11_median_regnoise.fits
BAND_NOISE_RMS001_SMOOTH01     = BP9_030_rms_n0032_5deg_uK_true_june2021.fits
BAND_NOISE_RMS001_SMOOTH02     = BP9_030_rms_n0016_10deg_uK_true_june2021.fits
BAND_NOISE_RMS001_SMOOTH03     = BP9_030_rms_n0016_60arcmin_uK_true_clean_degrade_june2021.fits
BAND_BANDPASSFILE001           = LFI_instrument_v4.h5
BAND_TOD_MAIN_PROCMASK001      = mask_proc_030_res_v5.fits
BAND_TOD_SMALL_PROCMASK001     = mask_smap6.fits
BAND_TOD_RIMO001               = LFI_instrument_v4.h5
BAND_TOD_FILELIST001           = filelist_30_v17.txt
BAND_MAPFILE001                 = init_tod_map_030_n512_BP8.1_v1.fits
BAND_NOISEFILE001               = init_tod_rms_030_n512_BP8.1_v1.fits
BAND_REG_NOISEFILE001           = none
BAND_NOISE_RMS001_SMOOTH01      = BP7_030_rms_n0032_5deg_uK_true.fits
BAND_NOISE_RMS001_SMOOTH02      = BP7_030_rms_n0016_10deg_uK_true.fits
BAND_NOISE_RMS001_SMOOTH03      = BP7_030_rms_n0016_60arcmin_uK_true.fits
BAND_BANDPASSFILE001            = LFI_instrument_v5.h5
BAND_TOD_TYPE001                = LFI
BAND_TOD_MAIN_PROCMASK001       = mask_fullsky_n0512_TQU.fits
BAND_TOD_SMALL_PROCMASK001      = mask_fullsky_n0512_TQU.fits
BAND_TOD_RIMO001                = LFI_instrument_v5.h5
BAND_TOD_FILELIST001            = filelist_030_simulations.txt
BAND_TOD_JUMPLIST001            = gain_jumps_LFI_1hour_v1.dat
BAND_TOD_ORBITAL_ONLY_ABSCAL001 = .true.
BAND_TOD_LEVEL001               = L2
BAND_TOD_START_SCANID001        = 3
BAND_TOD_END_SCANID001          = 10957 44072
BAND_TOD_INIT_FROM_HDF001       = default
INSTRUMENT_PARAM_FILE         = instrument_params_init_BP8.1_v1.dat
INIT_INSTRUMENT_FROM_HDF      = default
NUM_SIGNAL_COMPONENTS         = 1
INCLUDE_COMP01                = .true.  # Cmb # CMB; no monopole or dipole
NUM_CG_SAMPLING_GROUPS = 1
CG_SAMPLING_GROUP01          = cmb
CG_SAMPLING_GROUP_MASK01     = fullsky
CG_SAMPLING_GROUP_MAXITER01  = 50
COMP_LABEL01                  = cmb
COMP_TYPE01                   = cmb
COMP_CLASS01                  = diffuse    # {diffuse, ptsrc, template}
COMP_POLARIZATION01           = .true.
COMP_CG_SCALE_T01             = 1.d0
COMP_CG_SCALE_P01             = 1.d0
COMP_CG_SAMPLE_GROUP01        =  1
COMP_NSIDE01                  = 1024
COMP_MONOPOLE_PRIOR01         = monopole-dipole:mask_ff_mono_tr15_others_tr15_radio_tr30_chisq_tr5_n1024_TQU.fits mask_synch_beta_BP10_new_chisqmask_n1024.fits
COMP_DEFLATION_MASK01         = fullsky
COMP_L_APOD01                 = 2000
COMP_LMIN_AMP01               = 0
COMP_LMAX_AMP01               = 2000
COMP_LMAX_IND01               = 0
COMP_OUTPUT_FWHM01            = 14         # arcmin
COMP_UNIT01                   = uK_cmb
COMP_NU_REF_T01               = 1  100.
COMP_NU_REF_P01               = 1  100.
COMP_CL_TYPE01                = none  power_law  # {none, single_l, binned, power_law}
COMP_CL_POLTYPE01             = 1  # {1 = {T+E+B}, 2 = {T,E+B}, 3 = {T,E,B}}
COMP_CL_BETA_PRIOR_MEAN01     =  0.0
COMP_CL_BETA_PRIOR_RMS01      =  0.1
COMP_CL_L_PIVOT01             =  20          # Pivot multipole
COMP_CL_DEFAULT_AMP_T01       =  1000000        # D_l = amp * (l/lpivot)**beta
COMP_CL_DEFAULT_AMP_E01       =  1000
COMP_CL_DEFAULT_AMP_B01       =  1000
COMP_CL_DEFAULT_BETA_T01      =  0.d0
COMP_CL_DEFAULT_BETA_E01      = -0.5d0
COMP_CL_DEFAULT_BETA_B01      = -0.5d0
COMP_MASK01                   = fullsky
COMP_INPUT_AMP_MAP01          = init_cmb_amp_BP8.1_v1.fits
COMP_PRIOR_AMP_MAP01          = none
COMP_OUTPUT_EB_MAP01          = .false.
COMP_INIT_FROM_HDF01          = default
COMP_INPUT_AMP_MAP01          = my_cmb_map_seed_73663.fits
COMP_INIT_FROM_HDF01          = none default
COMP_MONOPOLE_PRIOR01         = monopole:mask_fullsky_n1024_TQU.fits
COMP_L_APOD01                 = 500
COMP_LMAX_AMP01               = 500
